# 测试批改详情页面功能

## 🚀 启动服务

### 1. 启动后端服务
```bash
cd /d/project/aiguru/ai_correction
python main.py
```
后端将在 http://localhost:8000 启动

### 2. 启动前端服务
```bash
cd frontend
npm run dev
```
前端将在 http://localhost:3000 启动

## 📝 测试步骤

### 步骤1：登录系统
1. 访问 http://localhost:3000
2. 点击登录按钮
3. 使用测试账户：
   - 用户名：`test_user_1`
   - 密码：`password1`

### 步骤2：进行批改测试
1. 登录后，访问批改页面：http://localhost:3000/grading
2. 上传一个测试文件（可以是文本文件、图片或PDF）
3. 选择批改类型（推荐使用"自动批改"）
4. 点击"开始批改"按钮
5. 等待批改完成

### 步骤3：查看详情对照页面
批改完成后，您会看到：
1. **右侧显示批改结果**
2. **操作按钮区域有三个按钮**：
   - 🔵 **"查看详情对照"** - 这是新增的按钮！
   - ⚪ "复制结果"
   - ⚪ "查看历史"

3. **点击"查看详情对照"按钮**，应该会跳转到：
   - URL: http://localhost:3000/detail/1
   - 页面显示左右对照视图

### 步骤4：验证详情页面功能
在详情页面您应该看到：

#### 左侧 - 文件预览区域
- 📁 显示"文件预览"标题
- 📂 如果有多个文件，会显示文件标签切换
- 🖼️ 图片文件：点击"加载预览"可查看图片
- 📄 文本文件：点击"加载内容"可查看文本
- 💻 代码风格的终端显示

#### 右侧 - 批改结果区域
- ✅ 显示"批改结果"标题
- 📊 顶部显示总分（如果有）
- 📝 结构化显示批改步骤
- 🔧 复制和下载按钮

#### 顶部导航栏
- ⬅️ "返回列表"按钮
- 📍 显示"第X题详情"
- ⏮️ "上一题"按钮
- ⏭️ "下一题"按钮

### 步骤5：测试其他功能
1. **文件预览测试**：
   - 上传不同类型的文件（文本、图片、PDF）
   - 验证预览功能是否正常

2. **导航测试**：
   - 进行多次批改，创建多个记录
   - 测试上一题/下一题导航
   - 测试返回列表功能

3. **从记录列表访问**：
   - 访问 http://localhost:3000/results
   - 点击任意题目的"详情对照"按钮
   - 验证是否能正确跳转

## 🎯 预期结果

### ✅ 成功标志
- [ ] 批改完成后能看到"查看详情对照"按钮
- [ ] 点击按钮能跳转到 `/detail/1` 页面
- [ ] 详情页面显示左右对照布局
- [ ] 左侧能正确显示文件预览
- [ ] 右侧能正确显示结构化的批改结果
- [ ] 导航按钮工作正常
- [ ] 页面具有科技感的设计效果

### ❌ 可能的问题
如果遇到以下问题：

**问题1：点击按钮没有跳转**
- 检查浏览器控制台是否有错误
- 确认前端服务正常运行

**问题2：详情页面显示"未找到记录"**
- 确认已经完成了批改操作
- 检查用户是否正确登录

**问题3：文件预览不工作**
- 检查后端API是否正常运行
- 查看网络请求是否成功

**问题4：页面样式异常**
- 确认CSS文件是否正确加载
- 检查Tailwind CSS是否正常工作

## 🔧 调试信息

### 检查后端API
访问以下URL检查API状态：
- http://localhost:8000/health - 基础健康检查
- http://localhost:8000/api/correction/health - 批改服务检查

### 检查前端路由
确认以下页面可以正常访问：
- http://localhost:3000/ - 首页
- http://localhost:3000/auth - 登录页面
- http://localhost:3000/grading - 批改页面
- http://localhost:3000/results - 记录列表
- http://localhost:3000/detail/1 - 详情页面

## 📞 如果遇到问题

1. **检查服务状态**：确认前后端都正常运行
2. **查看控制台**：检查浏览器和终端的错误信息
3. **清除缓存**：尝试刷新页面或清除浏览器缓存
4. **重新登录**：退出登录后重新登录

---

*测试完成后，您应该能够看到一个功能完整的批改详情对照页面！* 