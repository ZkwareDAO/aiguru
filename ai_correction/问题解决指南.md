# 问题解决指南

## 🔍 您遇到的问题分析

根据您提供的错误信息，主要有两个问题：

### 1. 启动器字符编码问题 ❌
```
'errorlevel' 不是内部或外部命令
'鈺愨晲鈺愨晲...' 不是内部或外部命令
```

**原因**：批处理文件字符编码问题导致中文字符显示为乱码

### 2. 后端服务频繁重启 ⚠️
```
WARNING: StatReload detected changes in 'test_api_response.py'. Reloading...
WARNING: StatReload detected changes in 'app.py'. Reloading...
```

**原因**：开发模式的热重载功能检测到文件变化而自动重启

## ✅ 解决方案

### 方案1：使用修复版启动器（推荐）

我已经创建了一个修复版的启动器 `start_fixed.bat`：

```bash
# 使用修复版启动器
start_fixed.bat
```

**改进点**：
- ✅ 移除了可能导致编码问题的特殊字符
- ✅ 简化了输出信息
- ✅ 保持了所有核心功能

### 方案2：使用生产模式启动（稳定性最佳）

如果您不需要热重载功能，可以使用生产模式：

```bash
# 启动生产模式后端（不会频繁重启）
python start_production.py

# 另开一个终端启动前端
cd frontend
npm run dev
```

**优点**：
- ✅ 不会因文件变化而重启
- ✅ 更稳定的运行环境
- ✅ 适合实际使用

### 方案3：手动启动（完全控制）

如果自动启动器有问题，可以手动启动：

```bash
# 终端1：启动后端
python app.py

# 终端2：启动前端
cd frontend
npm run dev
```

## 🛠️ 具体操作步骤

### 步骤1：停止当前服务
```bash
# 关闭所有Python和Node.js进程
taskkill /F /IM python.exe
taskkill /F /IM node.exe
```

### 步骤2：选择启动方式

#### 选项A：修复版启动器
```bash
start_fixed.bat
```

#### 选项B：生产模式
```bash
# 启动后端
python start_production.py

# 新开终端启动前端
cd frontend
npm run dev
```

#### 选项C：手动启动
```bash
# 终端1
python app.py

# 终端2
cd frontend
npm run dev
```

### 步骤3：验证服务状态

访问以下地址确认服务正常：
- 前端：http://localhost:3000
- 后端：http://localhost:8000/health
- API文档：http://localhost:8000/docs

## 🔧 常见问题排除

### Q1：启动器仍然显示乱码
**解决方案**：
1. 确保命令提示符编码为UTF-8
2. 使用PowerShell而不是CMD
3. 直接使用生产模式启动

### Q2：后端仍然频繁重启
**解决方案**：
1. 使用 `start_production.py` 启动
2. 或者暂时不修改代码文件
3. 将测试文件移到其他目录

### Q3：端口被占用
**解决方案**：
```bash
# 查找占用端口的进程
netstat -ano | findstr :8000
netstat -ano | findstr :3000

# 杀死占用进程
taskkill /F /PID [进程ID]
```

### Q4：依赖安装失败
**解决方案**：
```bash
# 重新安装Python依赖
pip install --upgrade fastapi uvicorn python-multipart python-jose

# 重新安装前端依赖
cd frontend
rm -rf node_modules
npm install
```

## 📊 推荐使用方式

### 开发阶段
- 使用 `start_fixed.bat` 或手动启动
- 可以享受热重载功能
- 便于调试和开发

### 生产使用
- 使用 `python start_production.py`
- 稳定性更好
- 不会意外重启

### 测试功能
- 使用 `python simple_test.py` 验证核心功能
- 确保批改功能正常工作

## 🎯 下一步操作建议

1. **立即解决**：使用 `start_fixed.bat` 启动系统
2. **验证功能**：访问 http://localhost:3000 测试批改功能
3. **稳定运行**：如需长期运行，切换到生产模式
4. **监控状态**：定期检查服务运行状态

## 📞 如果问题仍然存在

如果按照以上步骤仍有问题，请提供：
1. 使用的启动方式
2. 完整的错误信息
3. 系统环境信息（Windows版本、Python版本等）
4. 浏览器控制台的错误信息

---

**创建时间**：2024年12月19日  
**适用版本**：AI智能批改系统 v1.0  
**更新状态**：已包含最新修复 