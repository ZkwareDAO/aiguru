# 批改详情页面使用说明

## 功能概述

新增的批改详情页面提供了左右对照的视图，让您能够更直观地查看上传的文件和对应的批改结果。

## 主要功能

### 1. 左右对照视图
- **左侧**：文件预览区域，支持多种文件格式
- **右侧**：结构化的批改结果展示

### 2. 文件预览功能
支持以下文件类型的预览：
- **文本文件**：.txt, .md, .py, .js, .html, .css, .json, .xml
- **图片文件**：.jpg, .jpeg, .png, .gif, .bmp, .webp
- **PDF文件**：显示文件信息和下载链接
- **其他文件**：显示文件信息和下载选项

### 3. 批改结果结构化展示
- 自动解析批改内容为步骤
- 显示每个步骤的得分
- 突出显示总分和总结
- 支持复制和下载批改结果

### 4. 科技感设计
- 现代化的渐变背景
- 毛玻璃效果
- 动画过渡效果
- 响应式设计

## 访问方式

### 方法一：从批改记录页面
1. 登录系统
2. 访问 `/results` 页面查看批改记录
3. 点击任意题目的"详情对照"按钮

### 方法二：直接访问
- 访问 `/detail/{题目编号}` 
- 例如：`/detail/1` 查看第1题的详情

## 页面布局

```
┌─────────────────────────────────────────────────────────┐
│                    顶部导航栏                             │
│  返回列表 | 第X题详情 | 时间·类型        上一题 下一题    │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  ┌─────────────────┐    ┌─────────────────────────────┐ │
│  │                 │    │                             │ │
│  │   文件预览区     │    │      批改结果区              │ │
│  │                 │    │                             │ │
│  │  - 文件选择标签  │    │  - 总分显示                 │ │
│  │  - 文件内容显示  │    │  - 步骤详情                 │ │
│  │  - 加载预览按钮  │    │  - 操作按钮                 │ │
│  │                 │    │                             │ │
│  └─────────────────┘    └─────────────────────────────┘ │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

## 操作指南

### 文件预览
1. **多文件切换**：如果上传了多个文件，顶部会显示文件标签，点击切换
2. **加载内容**：
   - 文本文件：点击"加载内容"按钮查看文件内容
   - 图片文件：点击"加载预览"按钮查看图片
   - 其他文件：显示文件信息和下载选项

### 批改结果查看
1. **步骤浏览**：每个批改步骤都有独立的卡片显示
2. **得分查看**：右上角显示每步得分和总分
3. **内容操作**：
   - 复制：点击复制按钮复制全部批改结果
   - 下载：点击下载按钮保存为文本文件

### 题目导航
- **上一题/下一题**：使用顶部的导航按钮快速切换
- **返回列表**：点击"返回列表"回到批改记录页面

## 技术特性

### 安全性
- 用户身份验证
- 文件路径安全验证
- 只能访问自己的文件

### 性能优化
- 文件内容按需加载
- 图片预览优化
- 响应式设计适配各种设备

### 用户体验
- 加载状态提示
- 错误处理和提示
- 流畅的动画效果
- 直观的操作反馈

## 注意事项

1. **文件大小限制**：单个文件不超过5MB
2. **支持格式**：建议使用支持的文件格式以获得最佳预览体验
3. **网络要求**：文件预览需要网络连接
4. **浏览器兼容**：推荐使用现代浏览器以获得最佳体验

## 故障排除

### 常见问题

**Q: 文件预览显示"加载失败"**
A: 检查网络连接，确认文件格式是否支持，或尝试刷新页面

**Q: 图片无法显示**
A: 确认图片文件完整且格式正确，点击"加载预览"按钮

**Q: 页面显示"未找到记录"**
A: 确认题目编号正确，或检查是否有相应的批改记录

**Q: 无法访问详情页面**
A: 确认已登录且有相应权限

### 技术支持
如遇到其他问题，请检查：
1. 登录状态是否正常
2. 网络连接是否稳定
3. 浏览器是否为最新版本

---

*最后更新：2025年6月* 