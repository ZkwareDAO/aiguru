# 简化版提示词使用指南

## 📚 概述

简化版提示词系统是AI批改系统的精简版本，专注于核心功能，提供更直接、高效的批改体验。

## 🚀 主要特点

### 1. **简洁明了**
- 精简的系统提示词
- 清晰的批改流程
- 标准化的输出格式

### 2. **智能文件识别**
- 自动识别题目、学生答案和批改方案
- 根据上传区域智能判断文件类型
- 防止文件类型混淆

### 3. **严格评分标准**
- 完全按照标准答案评分
- 步骤缺失或方法不同会扣分
- 计算错误立即扣除相应分数

### 4. **统一输出格式**
```
=== 学生批改结果 ===

### 题目[题号]
**满分**：[分值]
**得分**：[实际得分]
**批改详情**：
- 步骤1：[答案摘录] ✓/✗ [M/A分值] 
- 步骤2：[答案摘录] ✓/✗ [M/A分值] 
**失分点**：[失分原因]

**总评**：
- 总分：[得分]/[满分]
- 优势：[1-2条优点]
- 建议：[1-2条改进建议]

=== 班级整体分析 ===
1. 平均分：[计算所有学生的平均分]
2. 易错题分析：[列出最常见的错误及对应题号]
3. 教学建议：[根据整体表现给出2-3条教学建议]
```

## 🔧 使用方法

### 1. 启用简化版提示词

在`.env`文件中设置：
```
USE_SIMPLIFIED_PROMPTS=true
```

### 2. 调用简化批改函数

```python
from functions.api_correcting.calling_api import simplified_batch_correction

# 准备文件
files_dict = {
    'question_files': ['题目.pdf'],
    'answer_files': ['学生答案.jpg'],
    'marking_files': ['批改方案.pdf']  # 可选
}

# 执行批改
result = simplified_batch_correction(
    files_dict=files_dict,
    strictness_level="严格"  # 可选：严格、中等、宽松
)

# 处理结果
if result['success']:
    print(result['result'])
else:
    print(f"错误：{result['error']}")
```

### 3. 文件上传规则

- **题目文件**：必须上传，包含原始题目
- **学生答案**：必须上传，包含学生的手写答案
- **批改方案**：可选，包含标准答案和评分标准

## 📋 核心功能

### 1. 文件类型自动识别
- 根据文件内容自动判断类型
- 防止将学生答案误认为题目
- 智能处理另类做法（不累加分值）

### 2. 分值处理规则
- 识别各种分值标注格式：(3 marks)、[5分]、3m等
- 正确处理另类做法（并列关系，非累加）
- 题目总分永远等于题目标注分值

### 3. 评分原则
- **方法分(M)**：正确的方法和思路
- **答案分(A)**：准确的计算和最终结果
- **跟踪评分**：即使前面有错误，后续逻辑正确仍可得分

## ⚡ 与标准版的区别

| 特性 | 简化版 | 标准版 |
|------|--------|--------|
| 提示词复杂度 | 简洁直接 | 详细全面 |
| 文件验证 | 基础验证 | 多层验证 |
| 错误处理 | 简单明了 | 详细分析 |
| 性能 | 更快 | 较慢 |
| 适用场景 | 日常批改 | 复杂场景 |

## 🎯 最佳实践

1. **文件准备**
   - 确保题目文件清晰完整
   - 学生答案拍照清晰
   - 批改方案包含M/A标注

2. **严格程度选择**
   - **严格**：正式考试、期末测评
   - **中等**：单元测试、阶段评估
   - **宽松**：平时作业、练习

3. **结果处理**
   - 检查批改详情的准确性
   - 关注失分点分析
   - 参考教学建议改进教学

## 🚨 注意事项

1. **必须上传题目文件**，否则无法批改
2. **禁止画蛇添足**，严格按照题目要求批改
3. **另类做法不累加分值**，理解并列关系
4. **使用Unicode数学符号**，避免LaTeX格式

## 📊 示例输出

```
=== 学生批改结果 ===

### 题目1
**满分**：5分
**得分**：3分
**批改详情**：
- 步骤1：正确建立方程 ✓ 1M
- 步骤2：求解过程有误 ✗ 1M
- 步骤3：最终答案错误 ✗ 2A
**失分点**：计算错误导致最终答案错误

**总评**：
- 总分：3/5
- 优势：能正确理解题意并建立方程
- 建议：加强计算准确性训练

=== 班级整体分析 ===
1. 平均分：3.5分
2. 易错题分析：题目1的计算步骤是主要失分点
3. 教学建议：
   - 重点复习方程求解步骤
   - 加强计算练习
```

## 🔄 切换回标准版

如需使用标准版提示词，设置：
```
USE_SIMPLIFIED_PROMPTS=false
```

---

简化版提示词系统让AI批改更加高效、准确、易用！ 