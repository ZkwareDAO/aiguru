# AI智能批改系统 - 统一启动说明

## 🚀 快速启动

**唯一启动方式**: 双击运行 `start_unified.bat`

## 📋 系统要求

### 必需环境
- **Python 3.8+** (已添加到系统PATH)
- **Node.js 18+** (已添加到系统PATH)
- **Windows 10/11** 操作系统

### 自动安装依赖
启动脚本会自动检查并安装以下依赖：
- **Python依赖**: FastAPI, uvicorn, python-multipart, python-jose, passlib
- **前端依赖**: 自动运行 `npm install` (如果node_modules不存在)

## 🔧 启动流程

1. **环境检查** - 验证Python和Node.js环境
2. **端口清理** - 自动清理8000和3000端口占用
3. **依赖安装** - 自动安装缺失的依赖包
4. **目录创建** - 创建uploads、logs、user_data目录
5. **后端启动** - 启动FastAPI服务 (端口8000)
6. **前端启动** - 启动Next.js服务 (端口3000)
7. **健康检查** - 验证服务是否正常运行
8. **浏览器打开** - 自动打开系统界面

## 📊 服务地址

- **前端应用**: http://localhost:3000
- **后端API**: http://localhost:8000
- **API文档**: http://localhost:8000/docs
- **健康检查**: http://localhost:8000/health

## 🔑 测试账户

- **用户名**: test_user_1
- **密码**: password1

## 💡 使用说明

### 首次启动
1. 双击 `start_unified.bat`
2. 等待依赖安装完成
3. 等待服务启动完成
4. 浏览器会自动打开系统界面

### 日常使用
1. 双击 `start_unified.bat` 即可
2. 所有依赖已安装，启动速度更快
3. 支持热重载，代码修改自动生效

## 🔧 故障排除

### 常见问题

#### 1. 端口占用错误
**现象**: 提示端口8000或3000被占用
**解决**: 重新运行启动脚本，会自动清理端口

#### 2. Python环境问题
**现象**: 提示Python未安装
**解决**: 
- 安装Python 3.8+
- 确保添加到系统PATH
- 重启命令行窗口

#### 3. Node.js环境问题
**现象**: 提示Node.js未安装
**解决**:
- 安装Node.js 18+
- 确保添加到系统PATH
- 重启命令行窗口

#### 4. 前端编译缓慢
**现象**: 前端服务启动缓慢
**解决**: 
- 首次启动需要编译，请耐心等待
- 删除 `frontend/node_modules` 重新安装
- 检查网络连接

#### 5. 依赖安装失败
**现象**: pip install 或 npm install 失败
**解决**:
- 检查网络连接
- 使用国内镜像源
- 手动安装依赖

## 📁 目录结构

```
AI智能批改系统/
├── start_unified.bat          # 统一启动脚本
├── app.py                     # 后端主服务文件
├── main.py                    # 备用后端文件
├── frontend/                  # 前端源码
│   ├── package.json
│   └── ...
├── uploads/                   # 上传文件存储
├── logs/                      # 系统日志
├── user_data/                 # 用户数据
└── functions/                 # 核心功能模块
```

## 🛑 关闭服务

### 方法1: 关闭启动器窗口
- 关闭 `start_unified.bat` 窗口
- 会提示是否关闭相关服务

### 方法2: 手动关闭
- 关闭"后端API服务"窗口
- 关闭"前端应用服务"窗口

### 方法3: 任务管理器
- 结束python.exe进程
- 结束node.exe进程

## 🔄 更新和维护

### 代码更新
- 后端代码修改会自动重载
- 前端代码修改会自动更新
- 无需重启服务

### 依赖更新
- Python依赖: `pip install -r requirements.txt --upgrade`
- 前端依赖: `cd frontend && npm update`

### 数据备份
- 用户数据: `user_data.json`
- 上传文件: `uploads/` 目录
- 系统日志: `logs/` 目录

## ⚠️ 注意事项

1. **保持窗口打开**: 启动后的服务窗口请保持打开
2. **网络要求**: 首次启动需要网络下载依赖
3. **磁盘空间**: 确保有足够空间存储上传文件
4. **防火墙设置**: 确保8000和3000端口未被阻止
5. **系统权限**: 可能需要管理员权限执行某些操作

## 📞 技术支持

如果遇到问题，请检查：
1. 后端服务窗口的错误信息
2. 前端服务窗口的编译状态  
3. 系统日志文件 `logs/app_debug.log`
4. 浏览器控制台的错误信息

---

**记住**: 只需要使用 `start_unified.bat` 一个文件即可启动整个系统！ 