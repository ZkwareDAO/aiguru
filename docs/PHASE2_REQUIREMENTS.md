# ğŸ“‹ Phase 2 å®Œæ•´éœ€æ±‚æ–‡æ¡£

**é¡¹ç›®åç§°**: AIä½œä¸šæ‰¹æ”¹ç³»ç»Ÿ - Phase 2 å‰ç«¯é›†æˆä¸å®Œæ•´æµ‹è¯•  
**æ–‡æ¡£ç‰ˆæœ¬**: v2.0  
**åˆ¶å®šæ—¥æœŸ**: 2025-10-05  
**é¢„è®¡å·¥æœŸ**: 10ä¸ªå·¥ä½œæ—¥  
**å½“å‰çŠ¶æ€**: ğŸ“ éœ€æ±‚æ–‡æ¡£å·²å®Œæˆ  

---

## ğŸ“‘ ç›®å½•

1. [é¡¹ç›®æ¦‚è¿°](#1-é¡¹ç›®æ¦‚è¿°)
2. [Phase 1 å›é¡¾](#2-phase-1-å›é¡¾)
3. [Phase 2 ç›®æ ‡](#3-phase-2-ç›®æ ‡)
4. [æ ¸å¿ƒåŠŸèƒ½éœ€æ±‚](#4-æ ¸å¿ƒåŠŸèƒ½éœ€æ±‚)
5. [æŠ€æœ¯æ¶æ„è®¾è®¡](#5-æŠ€æœ¯æ¶æ„è®¾è®¡)
6. [Agentç³»ç»Ÿè®¾è®¡](#6-agentç³»ç»Ÿè®¾è®¡)
7. [æ•°æ®åº“è®¾è®¡](#7-æ•°æ®åº“è®¾è®¡)
8. [APIè®¾è®¡](#8-apiè®¾è®¡)
9. [å‰ç«¯è®¾è®¡](#9-å‰ç«¯è®¾è®¡)
10. [å®æ–½è®¡åˆ’](#10-å®æ–½è®¡åˆ’)
11. [éªŒæ”¶æ ‡å‡†](#11-éªŒæ”¶æ ‡å‡†)
12. [é£é™©è¯„ä¼°](#12-é£é™©è¯„ä¼°)
13. [æˆæœ¬åˆ†æ](#13-æˆæœ¬åˆ†æ)

---

## 1. é¡¹ç›®æ¦‚è¿°

### 1.1 èƒŒæ™¯

Phase 1å·²å®ŒæˆAgentæ‰¹æ”¹ç³»ç»Ÿçš„æ ¸å¿ƒå¼€å‘ï¼ŒåŒ…æ‹¬:
- âœ… UnifiedGradingAgent - ç»Ÿä¸€æ‰¹æ”¹Agent
- âœ… ComplexityAssessor - å¤æ‚åº¦è¯„ä¼°å™¨
- âœ… SmartOrchestrator - æ™ºèƒ½ç¼–æ’å™¨
- âœ… CacheService - æ™ºèƒ½ç¼“å­˜æœåŠ¡
- âœ… APIæ¥å£ - 5ä¸ªRESTfulç«¯ç‚¹

Phase 2çš„ç›®æ ‡æ˜¯å°†è¿™å¥—ç³»ç»Ÿé›†æˆåˆ°å®é™…åº”ç”¨ä¸­ï¼Œè®©ç”¨æˆ·å¯ä»¥ä½¿ç”¨ã€‚

### 1.2 Phase 2 æ ¸å¿ƒä»·å€¼

**è®©AIæ‰¹æ”¹ç³»ç»ŸçœŸæ­£å¯ç”¨**:
- ç”¨æˆ·å¯ä»¥æäº¤ä½œä¸šå¹¶æŸ¥çœ‹æ‰¹æ”¹ç»“æœ
- æ•™å¸ˆå¯ä»¥æ‰‹åŠ¨æ‰¹æ³¨å’Œè°ƒæ•´
- æ”¯æŒå¤šé¡µå¤šé¢˜çš„å¤æ‚ä½œä¸š
- æä¾›æ¸…æ™°ç›´è§‚çš„æ‰¹æ”¹å±•ç¤º

### 1.3 å…³é”®åˆ›æ–°ç‚¹

1. **å¤šAgentåä½œ** - PreprocessAgent + GradingAgent + LocationAgent
2. **ç²¾ç¡®ä½ç½®æ ‡æ³¨** - ä½¿ç”¨Gemini 2.5 Flash Liteè¿›è¡Œåƒç´ çº§å®šä½
3. **å¤šé¡µå¤šé¢˜å¯¼èˆª** - ä¸‰æ å¸ƒå±€ + æ™ºèƒ½å¯¼èˆª
4. **æ•™å¸ˆæ‰¹æ³¨å·¥å…·** - å®Œæ•´çš„æ‰‹åŠ¨æ‰¹æ³¨åŠŸèƒ½
5. **å“åº”å¼è®¾è®¡** - æ¡Œé¢ç«¯å’Œç§»åŠ¨ç«¯ä¸åŒä½“éªŒ

---

## 2. Phase 1 å›é¡¾

### 2.1 å·²å®Œæˆçš„å·¥ä½œ

| æ¨¡å— | çŠ¶æ€ | è¯´æ˜ |
|------|------|------|
| UnifiedGradingAgent | âœ… 100% | ç»Ÿä¸€æ‰¹æ”¹Agentï¼ŒèŠ‚çœ23%æˆæœ¬ |
| ComplexityAssessor | âœ… 100% | 6ç»´åº¦å¤æ‚åº¦è¯„ä¼° |
| SmartOrchestrator | âœ… 100% | LangGraphç¼–æ’å™¨ |
| CacheService | âœ… 100% | æ™ºèƒ½ç¼“å­˜æœåŠ¡ |
| APIæ¥å£ | âœ… 100% | 5ä¸ªRESTfulç«¯ç‚¹ |
| æµ‹è¯•è„šæœ¬ | âœ… 100% | å•å…ƒæµ‹è¯• + é›†æˆæµ‹è¯• |
| æ–‡æ¡£ | âœ… 100% | 17ç¯‡æ–‡æ¡£ï¼Œ60000å­— |

### 2.2 æµ‹è¯•ç»“æœ

```
âœ… æ‰¹æ”¹åŠŸèƒ½: æ­£å¸¸
âœ… å¤æ‚åº¦è¯„ä¼°: å‡†ç¡®
âœ… æˆæœ¬éªŒè¯: $0.000043/é¢˜ (èŠ‚çœ99.7%)
âœ… æ€§èƒ½: å¹³å‡3ç§’
âœ… ä»£ç è´¨é‡: ä¼˜ç§€
```

### 2.3 å¾…å®Œæˆçš„å·¥ä½œ

- â³ æ•°æ®åº“é›†æˆ
- â³ WebSocketå®æ—¶é€šçŸ¥
- â³ å‰ç«¯é¡µé¢å¼€å‘
- â³ ä½ç½®æ ‡æ³¨Agent
- â³ å¤šé¡µå¤šé¢˜æ”¯æŒ
- â³ æ•™å¸ˆæ‰¹æ³¨å·¥å…·

---

## 3. Phase 2 ç›®æ ‡

### 3.1 æ€»ä½“ç›®æ ‡

**å°†Agentæ‰¹æ”¹ç³»ç»Ÿé›†æˆåˆ°å®é™…åº”ç”¨ä¸­ï¼Œæä¾›å®Œæ•´çš„ç”¨æˆ·ä½“éªŒ**

### 3.2 å…·ä½“ç›®æ ‡

#### 3.2.1 åŠŸèƒ½ç›®æ ‡

1. **ç”¨æˆ·å¯ä»¥æäº¤ä½œä¸š** - ä¸Šä¼ å›¾ç‰‡ï¼Œè§¦å‘æ‰¹æ”¹
2. **å®æ—¶æŸ¥çœ‹è¿›åº¦** - WebSocketæ¨é€æ‰¹æ”¹è¿›åº¦
3. **æŸ¥çœ‹æ‰¹æ”¹ç»“æœ** - æ¸…æ™°å±•ç¤ºåˆ†æ•°ã€é”™è¯¯ã€åé¦ˆ
4. **å¤šé¡µå¤šé¢˜æ”¯æŒ** - æ”¯æŒ10é¡µä»¥ä¸Šã€15é¢˜ä»¥ä¸Šçš„ä½œä¸š
5. **ç²¾ç¡®ä½ç½®æ ‡æ³¨** - åœ¨åŸå›¾ä¸Šç²¾ç¡®æ ‡æ³¨é”™è¯¯ä½ç½®
6. **æ•™å¸ˆæ‰¹æ³¨** - æ•™å¸ˆå¯ä»¥æ‰‹åŠ¨æ‰¹æ³¨å’Œè°ƒæ•´
7. **å†å²è®°å½•** - æŸ¥çœ‹æ‰€æœ‰æäº¤çš„æ‰¹æ”¹è®°å½•

#### 3.2.2 æ€§èƒ½ç›®æ ‡

| æŒ‡æ ‡ | ç›®æ ‡å€¼ |
|------|--------|
| æ‰¹æ”¹æ—¶é—´ | < 20ç§’ (15é¢˜) |
| APIå“åº”æ—¶é—´ | < 500ms |
| WebSocketå»¶è¿Ÿ | < 100ms |
| é¡µé¢åŠ è½½æ—¶é—´ | < 2ç§’ |
| å¹¶å‘æ”¯æŒ | 10ä¸ªè¯·æ±‚æ— é”™è¯¯ |

#### 3.2.3 å‡†ç¡®åº¦ç›®æ ‡

| æŒ‡æ ‡ | ç›®æ ‡å€¼ |
|------|--------|
| é¢˜ç›®åˆ†æ®µå‡†ç¡®åº¦ | > 90% |
| æ‰¹æ”¹å‡†ç¡®åº¦ | > 95% |
| ä½ç½®æ ‡æ³¨å‡†ç¡®åº¦ | > 80% |
| ä½ç½®ä¿¡åº¦æ ‡æ³¨ | < 20% |

#### 3.2.4 ç”¨æˆ·ä½“éªŒç›®æ ‡

- ç•Œé¢ç¾è§‚ï¼Œç¬¦åˆç°ä»£è®¾è®¡è§„èŒƒ
- äº¤äº’æµç•…ï¼Œæ— å¡é¡¿
- åé¦ˆåŠæ—¶ï¼Œæœ‰è¿›åº¦æç¤º
- é”™è¯¯æç¤ºæ¸…æ™°ï¼Œæœ‰è§£å†³æ–¹æ¡ˆ
- ç§»åŠ¨ç«¯é€‚é…è‰¯å¥½

---

## 4. æ ¸å¿ƒåŠŸèƒ½éœ€æ±‚

### 4.1 åŠŸèƒ½æ¨¡å—æ¦‚è§ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 AIæ‰¹æ”¹ç³»ç»Ÿ                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚ ä½œä¸šæäº¤æ¨¡å— â”‚  â”‚ æ‰¹æ”¹å¤„ç†æ¨¡å— â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚         â”‚                  â”‚                     â”‚
â”‚         â†“                  â†“                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚ è¿›åº¦æŸ¥çœ‹æ¨¡å— â”‚  â”‚ ç»“æœå±•ç¤ºæ¨¡å— â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚         â”‚                  â”‚                     â”‚
â”‚         â†“                  â†“                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚ å†å²è®°å½•æ¨¡å— â”‚  â”‚ æ•™å¸ˆæ‰¹æ³¨æ¨¡å— â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.2 åŠŸèƒ½è¯¦ç»†éœ€æ±‚

#### 4.2.1 ä½œä¸šæäº¤æ¨¡å—

**åŠŸèƒ½æè¿°**: ç”¨æˆ·ä¸Šä¼ ä½œä¸šå›¾ç‰‡ï¼Œè§¦å‘æ‰¹æ”¹

**ç”¨æˆ·æ•…äº‹**:
```
ä½œä¸ºå­¦ç”Ÿï¼Œ
æˆ‘æƒ³è¦ä¸Šä¼ æˆ‘çš„ä½œä¸šå›¾ç‰‡ï¼Œ
ä»¥ä¾¿è·å¾—AIæ‰¹æ”¹å’Œåé¦ˆã€‚
```

**åŠŸèƒ½ç‚¹**:
1. æ–‡ä»¶ä¸Šä¼ 
   - æ”¯æŒæ ¼å¼: JPG, PNG, PDF
   - å•ä¸ªæ–‡ä»¶å¤§å°: < 10MB
   - å¤šæ–‡ä»¶ä¸Šä¼ : æ”¯æŒï¼Œæœ€å¤š20ä¸ªæ–‡ä»¶
   - æ‹–æ‹½ä¸Šä¼ : æ”¯æŒ
   - é¢„è§ˆåŠŸèƒ½: ä¸Šä¼ å‰å¯é¢„è§ˆ

2. ä½œä¸šä¿¡æ¯å¡«å†™
   - é€‰æ‹©ä½œä¸š: ä»ä½œä¸šåˆ—è¡¨ä¸­é€‰æ‹©
   - å¤‡æ³¨: å¯é€‰ï¼Œæœ€å¤š200å­—

3. æäº¤éªŒè¯
   - æ–‡ä»¶æ ¼å¼éªŒè¯
   - æ–‡ä»¶å¤§å°éªŒè¯
   - ä½œä¸šé€‰æ‹©éªŒè¯
   - é‡å¤æäº¤æ£€æµ‹

4. æäº¤åé¦ˆ
   - ä¸Šä¼ è¿›åº¦æ¡
   - ä¸Šä¼ æˆåŠŸæç¤º
   - è‡ªåŠ¨è·³è½¬åˆ°è¿›åº¦é¡µé¢

**ç•Œé¢åŸå‹**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æäº¤ä½œä¸š                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ é€‰æ‹©ä½œä¸š: [ä¸‹æ‹‰é€‰æ‹©]                â”‚
â”‚                                      â”‚
â”‚ ä¸Šä¼ æ–‡ä»¶:                            â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚  æ‹–æ‹½æ–‡ä»¶åˆ°è¿™é‡Œ                  â”‚ â”‚
â”‚ â”‚  æˆ–ç‚¹å‡»é€‰æ‹©æ–‡ä»¶                  â”‚ â”‚
â”‚ â”‚  æ”¯æŒ: JPG, PNG, PDF             â”‚ â”‚
â”‚ â”‚  æœ€å¤š20ä¸ªæ–‡ä»¶ï¼Œæ¯ä¸ª<10MB         â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                      â”‚
â”‚ å·²é€‰æ‹©æ–‡ä»¶:                          â”‚
â”‚ â€¢ page1.jpg (2.3MB) [åˆ é™¤]          â”‚
â”‚ â€¢ page2.jpg (1.8MB) [åˆ é™¤]          â”‚
â”‚                                      â”‚
â”‚ å¤‡æ³¨ (å¯é€‰):                         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚                                  â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                      â”‚
â”‚ [å–æ¶ˆ]  [æäº¤å¹¶æ‰¹æ”¹]                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**APIéœ€æ±‚**:
```typescript
POST /api/v2/submissions
Content-Type: multipart/form-data

Request:
{
  assignmentId: string;
  files: File[];
  note?: string;
}

Response: 201 Created
{
  submissionId: string;
  status: "processing";
  message: "ä½œä¸šå·²æäº¤ï¼Œæ­£åœ¨æ‰¹æ”¹ä¸­...";
}
```

#### 4.2.2 æ‰¹æ”¹å¤„ç†æ¨¡å—

**åŠŸèƒ½æè¿°**: åå°å¤„ç†æ‰¹æ”¹ä»»åŠ¡ï¼Œä½¿ç”¨Multi-Agentåä½œ

**å¤„ç†æµç¨‹**:
```
ç”¨æˆ·æäº¤ä½œä¸š
    â†“
[1] æ–‡ä»¶ä¸Šä¼ åˆ°äº‘å­˜å‚¨
    â†“
[2] åˆ›å»ºSubmissionè®°å½•
    â†“
[3] è§¦å‘æ‰¹æ”¹ä»»åŠ¡ (åå°)
    â”œâ”€ Agent 1: PreprocessAgent - é¢˜ç›®åˆ†æ®µ
    â”œâ”€ Agent 2: GradingAgent - æ‰¹æ”¹è¯†åˆ«
    â””â”€ Agent 3: LocationAgent - ä½ç½®æ ‡æ³¨
    â†“
[4] ä¿å­˜æ‰¹æ”¹ç»“æœåˆ°æ•°æ®åº“
    â†“
[5] æ¨é€å®Œæˆé€šçŸ¥ (WebSocket)
```

**Agentåä½œæµç¨‹**:
```typescript
// LangGraphçŠ¶æ€æœº
const workflow = new StateGraph<GradingState>({
  channels: {
    submissionId: null,
    images: null,
    questionSegments: null,      // Agent 1 è¾“å‡º
    gradingResults: null,         // Agent 2 è¾“å‡º
    annotatedResults: null,       // Agent 3 è¾“å‡º
    finalResult: null,
    error: null,
  },
});

// èŠ‚ç‚¹å®šä¹‰
workflow.addNode('preprocess', preprocessNode);
workflow.addNode('grade', gradeNode);
workflow.addNode('annotate', annotateNode);
workflow.addNode('finalize', finalizeNode);

// æµç¨‹å®šä¹‰
workflow.addEdge('__start__', 'preprocess');
workflow.addEdge('preprocess', 'grade');
workflow.addEdge('grade', 'annotate');
workflow.addEdge('annotate', 'finalize');
workflow.addEdge('finalize', '__end__');
```

**è¿›åº¦æ¨é€**:
```typescript
// WebSocketäº‹ä»¶
{
  type: "grading_progress",
  submissionId: "uuid",
  stage: "preprocessing" | "grading" | "annotating" | "completed",
  progress: 0-100,
  message: "æ­£åœ¨å¤„ç†ç¬¬3é¢˜...",
  timestamp: "2025-10-05T10:30:00Z"
}
```

#### 4.2.3 è¿›åº¦æŸ¥çœ‹æ¨¡å—

**åŠŸèƒ½æè¿°**: å®æ—¶æ˜¾ç¤ºæ‰¹æ”¹è¿›åº¦

**ç•Œé¢åŸå‹**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ‰¹æ”¹ä¸­...                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘] 60%           â”‚
â”‚                                      â”‚
â”‚  å½“å‰é˜¶æ®µ: æ‰¹æ”¹ä¸­                    â”‚
â”‚  æ­£åœ¨æ‰¹æ”¹ç¬¬9é¢˜...                    â”‚
â”‚                                      â”‚
â”‚  é¢„è®¡å‰©ä½™æ—¶é—´: 10ç§’                  â”‚
â”‚                                      â”‚
â”‚  å·²å®Œæˆ:                             â”‚
â”‚  âœ… é¢„å¤„ç† (è¯†åˆ«åˆ°15ä¸ªé¢˜ç›®)          â”‚
â”‚  âœ… æ‰¹æ”¹ (å·²æ‰¹æ”¹8é¢˜)                 â”‚
â”‚  â³ ä½ç½®æ ‡æ³¨ (è¿›è¡Œä¸­...)             â”‚
â”‚                                      â”‚
â”‚  [å–æ¶ˆæ‰¹æ”¹]                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 4.2.4 ç»“æœå±•ç¤ºæ¨¡å—

**åŠŸèƒ½æè¿°**: å±•ç¤ºæ‰¹æ”¹ç»“æœï¼Œæ”¯æŒå¤šé¡µå¤šé¢˜

**æ¡Œé¢ç«¯å¸ƒå±€è¯¦ç»†**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ‰¹æ”¹ç»“æœ | å¾—åˆ†: 85/100 | é”™è¯¯: 8ä¸ª | [âœï¸ æ‰¹æ³¨æ¨¡å¼]        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚ â”‚ ğŸ“‘ ç›®å½•â”‚  â”‚ ğŸ“„ ä½œä¸šå›¾ç‰‡      â”‚  â”‚ ğŸ“ æ‰¹æ”¹è¯¦æƒ…      â”‚    â”‚
â”‚ â”‚        â”‚  â”‚                  â”‚  â”‚                  â”‚    â”‚
â”‚ â”‚ ğŸ“Šæ€»è§ˆ â”‚  â”‚  [ç¬¬2é¡µ-ç¬¬3é¢˜]   â”‚  â”‚ å½“å‰: ç¬¬3é¢˜      â”‚    â”‚
â”‚ â”‚ 10é¡µ   â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚                  â”‚    â”‚
â”‚ â”‚ 15é¢˜   â”‚  â”‚  â”‚  3.è§£æ–¹ç¨‹  â”‚  â”‚  â”‚ âŒ é”™è¯¯1         â”‚    â”‚
â”‚ â”‚ 8é”™è¯¯  â”‚  â”‚  â”‚  âŒ1       â”‚  â”‚  â”‚ è®¡ç®—é”™è¯¯...      â”‚    â”‚
â”‚ â”‚        â”‚  â”‚  â”‚  x+2y=8    â”‚  â”‚  â”‚ æ‰£åˆ†: -2.0       â”‚    â”‚
â”‚ â”‚ ğŸ“„é¡µé¢ â”‚  â”‚  â”‚  âœ“2        â”‚  â”‚  â”‚                  â”‚    â”‚
â”‚ â”‚ âœ…ç¬¬1é¡µâ”‚  â”‚  â”‚  x=2,y=3   â”‚  â”‚  â”‚ ğŸ’¡ æ­£ç¡®åšæ³•:     â”‚    â”‚
â”‚ â”‚ âš ï¸ç¬¬2é¡µâ”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚ ...              â”‚    â”‚
â”‚ â”‚ âŒç¬¬3é¡µâ”‚  â”‚                  â”‚  â”‚                  â”‚    â”‚
â”‚ â”‚        â”‚  â”‚  [é¡µé¢å¯¼èˆª]      â”‚  â”‚ [ä¸Šä¸€ä¸ª][ä¸‹ä¸€ä¸ª] â”‚    â”‚
â”‚ â”‚ ğŸ“é¢˜ç›® â”‚  â”‚  â—€ 1 2 [3] 4 â–¶  â”‚  â”‚                  â”‚    â”‚
â”‚ â”‚ âœ…ç¬¬1é¢˜â”‚  â”‚                  â”‚  â”‚                  â”‚    â”‚
â”‚ â”‚ âŒç¬¬3é¢˜â”‚  â”‚  [ç¼©æ”¾: 100%]    â”‚  â”‚                  â”‚    â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ç§»åŠ¨ç«¯ä¸‰ç§è§†å›¾**:
1. **å›¾ç‰‡æ¨¡å¼**: å¯ç¼©æ”¾çš„åŸå›¾ + é”™è¯¯æ ‡è®°
2. **å¡ç‰‡æ¨¡å¼**: å·¦å³æ»‘åŠ¨æŸ¥çœ‹æ¯ä¸ªæ‰¹æ”¹ç‚¹
3. **è®²è§£æ¨¡å¼**: æ—¶é—´è½´å¼é€æ­¥è®²è§£

#### 4.2.5 å†å²è®°å½•æ¨¡å—

**åŠŸèƒ½æè¿°**: æŸ¥çœ‹æ‰€æœ‰æäº¤çš„æ‰¹æ”¹è®°å½•

**ç•Œé¢åŸå‹**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ‰¹æ”¹å†å²                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [ç­›é€‰] [æ’åº]                        â”‚
â”‚                                      â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ æ•°å­¦ä½œä¸š1                        â”‚ â”‚
â”‚ â”‚ 2025-10-05 10:30                â”‚ â”‚
â”‚ â”‚ å¾—åˆ†: 85/100 | 8ä¸ªé”™è¯¯          â”‚ â”‚
â”‚ â”‚ [æŸ¥çœ‹è¯¦æƒ…] [é‡æ–°æ‰¹æ”¹]           â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                      â”‚
â”‚ [åŠ è½½æ›´å¤š...]                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 4.2.6 æ•™å¸ˆæ‰¹æ³¨æ¨¡å—

**åŠŸèƒ½æè¿°**: æ•™å¸ˆå¯ä»¥æ‰‹åŠ¨æ‰¹æ³¨å’Œè°ƒæ•´

**æ‰¹æ³¨å·¥å…·**:
- ğŸ–Šï¸ ç”»ç¬” - è‡ªç”±ç»˜åˆ¶
- â­• åœ†åœˆ - åœˆå‡ºé”™è¯¯
- âœ“ å‹¾ - æ ‡è®°æ­£ç¡®
- âœ— å‰ - æ ‡è®°é”™è¯¯
- ğŸ’¬ æ–‡å­— - æ·»åŠ æ‰¹æ³¨æ–‡å­—

**ç•Œé¢åŸå‹**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [æ‰¹æ³¨å·¥å…·æ ]                                    â”‚
â”‚ ğŸ–Šï¸ ç”»ç¬” â­• åœ†åœˆ âœ“ å‹¾ âœ— å‰ ğŸ’¬ æ–‡å­—              â”‚
â”‚ é¢œè‰²: ğŸ”´ ğŸ”µ ğŸŸ¢  |  [æ’¤é”€] [é‡åš] [æ¸…é™¤]        â”‚
â”‚ [ä¿å­˜æ‰¹æ³¨] [å–æ¶ˆ]                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [å…¨å±ç”»å¸ƒ - ä½œä¸šå›¾ç‰‡ + ç»˜åˆ¶å±‚]                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 5. æŠ€æœ¯æ¶æ„è®¾è®¡

### 5.1 æ•´ä½“æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         å‰ç«¯å±‚                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ Next.js 14   â”‚  â”‚ React Query  â”‚  â”‚ Socket.io    â”‚     â”‚
â”‚  â”‚ TypeScript   â”‚  â”‚ TanStack     â”‚  â”‚ Client       â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†• HTTP/WebSocket
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         APIå±‚                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ FastAPI      â”‚  â”‚ WebSocket    â”‚  â”‚ Background   â”‚     â”‚
â”‚  â”‚ REST API     â”‚  â”‚ Manager      â”‚  â”‚ Tasks        â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†•
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ä¸šåŠ¡é€»è¾‘å±‚                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚              GradingOrchestrator                      â”‚  â”‚
â”‚  â”‚              (LangGraphç¼–æ’å™¨)                        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚         â†“                  â†“                  â†“             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ Preprocess   â”‚  â”‚ Grading      â”‚  â”‚ Location     â”‚     â”‚
â”‚  â”‚ Agent        â”‚  â”‚ Agent        â”‚  â”‚ Agent        â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†•
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       æ•°æ®å±‚                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ PostgreSQL   â”‚  â”‚ Redis        â”‚  â”‚ S3/äº‘å­˜å‚¨    â”‚     â”‚
â”‚  â”‚ (ä¸»æ•°æ®åº“)   â”‚  â”‚ (ç¼“å­˜)       â”‚  â”‚ (æ–‡ä»¶å­˜å‚¨)   â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.2 æŠ€æœ¯æ ˆ

#### 5.2.1 åç«¯æŠ€æœ¯æ ˆ

| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| Python | 3.13+ | ç¼–ç¨‹è¯­è¨€ |
| FastAPI | 0.104+ | Webæ¡†æ¶ |
| SQLAlchemy | 2.0+ | ORM |
| Alembic | 1.12+ | æ•°æ®åº“è¿ç§» |
| LangChain | 0.1+ | Agentæ¡†æ¶ |
| LangGraph | 0.0.20+ | Agentç¼–æ’ |
| Pydantic | 2.0+ | æ•°æ®éªŒè¯ |
| PostgreSQL | 15+ | ä¸»æ•°æ®åº“ |
| Redis | 7+ | ç¼“å­˜ |
| Tesseract.js | 4.0+ | OCR |

#### 5.2.2 å‰ç«¯æŠ€æœ¯æ ˆ

| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| Next.js | 14+ | Reactæ¡†æ¶ |
| TypeScript | 5.0+ | ç±»å‹å®‰å…¨ |
| React | 18+ | UIåº“ |
| TanStack Query | 5.0+ | æ•°æ®è·å– |
| Socket.io | 4.0+ | WebSocket |
| Tailwind CSS | 3.0+ | æ ·å¼ |
| shadcn/ui | latest | UIç»„ä»¶ |
| Fabric.js | 5.0+ | ç”»å¸ƒç»˜åˆ¶ |

---

## 6. Agentç³»ç»Ÿè®¾è®¡

### 6.1 Agentæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  GradingOrchestrator                        â”‚
â”‚                  (LangGraphç¼–æ’å™¨)                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                  â”‚                  â”‚
         â†“                  â†“                  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Agent 1      â”‚  â”‚ Agent 2      â”‚  â”‚ Agent 3      â”‚
â”‚ Preprocess   â”‚â†’ â”‚ Grading      â”‚â†’ â”‚ Location     â”‚
â”‚ Agent        â”‚  â”‚ Agent        â”‚  â”‚ Agent        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚                  â”‚                  â”‚
     â†“                  â†“                  â†“
  é¢˜ç›®åˆ†æ®µ           æ‰¹æ”¹è¯†åˆ«          ä½ç½®æ ‡æ³¨
```

### 6.2 Agent 1: PreprocessAgent

**èŒè´£**: é¢˜ç›®åˆ†æ®µè¯†åˆ«

**è¾“å…¥**:
- ä½œä¸šå›¾ç‰‡URL
- å›¾ç‰‡å°ºå¯¸

**è¾“å‡º**:
```typescript
interface QuestionSegment {
  questionNumber: string;    // "ç¬¬1é¢˜"
  pageIndex: number;
  bbox: BoundingBox;         // é¢˜ç›®è¾¹ç•Œæ¡†
  croppedImage: string;      // é¢˜ç›®æˆªå›¾
  ocrText: string;           // OCRè¯†åˆ«çš„æ–‡å­—
}
```

**å®ç°æ–¹æ¡ˆ**:
1. ä½¿ç”¨Tesseract.jsè¿›è¡ŒOCRè¯†åˆ«
2. è¯†åˆ«é¢˜å· (1. 2. 3. æˆ– (1) (2) (3) æˆ– ç¬¬1é¢˜)
3. è®¡ç®—æ¯ä¸ªé¢˜ç›®çš„è¾¹ç•Œæ¡†
4. æˆªå–é¢˜ç›®å›¾ç‰‡
5. æå–é¢˜ç›®å†…çš„æ–‡å­—

**æˆæœ¬**: $0.001/é¡µ (æˆ–å…è´¹ä½¿ç”¨Tesseract)

### 6.3 Agent 2: UnifiedGradingAgent

**èŒè´£**: æ‰¹æ”¹è¯†åˆ«

**è¾“å…¥**:
- é¢˜ç›®æˆªå›¾
- é¢˜ç›®æ–‡å­— (OCRç»“æœ)
- æ ‡å‡†ç­”æ¡ˆ

**è¾“å‡º**:
```typescript
interface GradingResult {
  score: number;
  maxScore: number;
  errors: Array<{
    type: string;
    description: string;
    deduction: number;
    suggestion: string;
    relatedText?: string;
  }>;
  correctParts: Array<{...}>;
  warnings: Array<{...}>;
  overallFeedback: string;
}
```

**æˆæœ¬**: $0.000043/é¢˜

### 6.4 Agent 3: LocationAnnotationAgent â­ æ–°å¢

**èŒè´£**: ç²¾ç¡®ä½ç½®æ ‡æ³¨

**è¾“å…¥**:
```typescript
interface LocationInput {
  imageUrl: string;
  imageWidth: number;
  imageHeight: number;
  questionBbox: BoundingBox;
  error: {
    description: string;
    type: string;
    relatedText?: string;
  };
}
```

**è¾“å‡º**:
```typescript
interface LocationOutput {
  bbox: BoundingBox;         // ç²¾ç¡®çš„åƒç´ åæ ‡
  type: 'point' | 'line' | 'area';
  confidence: number;        // 0-1
  reasoning: string;         // å®šä½ä¾æ®
}
```

**Promptè®¾è®¡**:
```
ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„ä½ç½®æ ‡æ³¨ä¸“å®¶ã€‚ä½ çš„ä»»åŠ¡æ˜¯åœ¨å­¦ç”Ÿä½œä¸šå›¾ç‰‡ä¸­ç²¾ç¡®å®šä½é”™è¯¯ä½ç½®ã€‚

å›¾ç‰‡ä¿¡æ¯:
- å›¾ç‰‡å°ºå¯¸: {width}px Ã— {height}px
- é¢˜ç›®åŒºåŸŸ: x={bbox.x}, y={bbox.y}, width={bbox.width}, height={bbox.height}

é”™è¯¯ä¿¡æ¯:
- ç±»å‹: {error.type}
- æè¿°: {error.description}
- ç›¸å…³æ–‡å­—: {error.relatedText}

è¯·è¿”å›JSONæ ¼å¼:
{
  "bbox": { "x": 150, "y": 200, "width": 200, "height": 50 },
  "type": "area",
  "confidence": 0.95,
  "reasoning": "é”™è¯¯ä½äºç¬¬äºŒè¡Œçš„è®¡ç®—ç»“æœéƒ¨åˆ†"
}
```

**æˆæœ¬**: $0.000001/é¢˜ (å‡ ä¹å…è´¹!)

---

## 7. æ•°æ®åº“è®¾è®¡

### 7.1 è¡¨ç»“æ„

#### 7.1.1 submissionsè¡¨ (æ›´æ–°)

```sql
CREATE TABLE submissions (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID NOT NULL REFERENCES users(id),
  assignment_id UUID NOT NULL REFERENCES assignments(id),
  
  -- æ–‡ä»¶ä¿¡æ¯
  files JSONB NOT NULL,
  note TEXT,
  
  -- æ‰¹æ”¹çŠ¶æ€
  status VARCHAR(20) NOT NULL DEFAULT 'pending',
  
  -- Agentæ‰¹æ”¹ç»“æœ (æ–°å¢)
  agent_grading_status VARCHAR(20),
  agent_total_score FLOAT,
  agent_max_score FLOAT,
  agent_question_count INTEGER,
  agent_error_count INTEGER,
  agent_warning_count INTEGER,
  agent_processing_time_ms INTEGER,
  agent_graded_at TIMESTAMP,
  
  -- æ—¶é—´æˆ³
  created_at TIMESTAMP NOT NULL DEFAULT NOW(),
  updated_at TIMESTAMP NOT NULL DEFAULT NOW()
);
```

#### 7.1.2 question_gradingsè¡¨ (æ–°å¢)

```sql
CREATE TABLE question_gradings (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  submission_id UUID NOT NULL REFERENCES submissions(id) ON DELETE CASCADE,
  
  -- é¢˜ç›®ä¿¡æ¯
  question_index INTEGER NOT NULL,
  question_number VARCHAR(50) NOT NULL,
  page_index INTEGER NOT NULL,
  
  -- é¢˜ç›®ä½ç½®
  bbox_x INTEGER NOT NULL,
  bbox_y INTEGER NOT NULL,
  bbox_width INTEGER NOT NULL,
  bbox_height INTEGER NOT NULL,
  
  -- æ‰¹æ”¹ç»“æœ
  score FLOAT NOT NULL,
  max_score FLOAT NOT NULL,
  status VARCHAR(20) NOT NULL,
  feedback TEXT,
  
  created_at TIMESTAMP NOT NULL DEFAULT NOW()
);
```

#### 7.1.3 error_annotationsè¡¨ (æ–°å¢)

```sql
CREATE TABLE error_annotations (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  question_grading_id UUID NOT NULL REFERENCES question_gradings(id) ON DELETE CASCADE,
  
  -- é”™è¯¯ä¿¡æ¯
  error_type VARCHAR(100) NOT NULL,
  description TEXT NOT NULL,
  deduction FLOAT NOT NULL,
  suggestion TEXT,
  related_text TEXT,
  
  -- ä½ç½®ä¿¡æ¯ (Agent 3 è¾“å‡º)
  position_x INTEGER NOT NULL,
  position_y INTEGER NOT NULL,
  position_width INTEGER NOT NULL,
  position_height INTEGER NOT NULL,
  position_type VARCHAR(20) NOT NULL,
  position_confidence FLOAT NOT NULL,
  position_reasoning TEXT,
  
  -- æˆªå›¾
  cropped_image_url TEXT,
  
  -- æ•™å¸ˆè°ƒæ•´
  teacher_adjusted BOOLEAN DEFAULT FALSE,
  teacher_position_x INTEGER,
  teacher_position_y INTEGER,
  
  created_at TIMESTAMP NOT NULL DEFAULT NOW()
);
```

---

## 8. APIè®¾è®¡

### 8.1 APIç«¯ç‚¹åˆ—è¡¨

| æ–¹æ³• | ç«¯ç‚¹ | æè¿° |
|------|------|------|
| POST | `/api/v2/submissions` | æäº¤ä½œä¸š |
| GET | `/api/v2/submissions/{id}` | è·å–æäº¤è¯¦æƒ… |
| GET | `/api/v2/submissions/{id}/result` | è·å–æ‰¹æ”¹ç»“æœ |
| GET | `/api/v2/submissions/{id}/status` | è·å–æ‰¹æ”¹çŠ¶æ€ |
| GET | `/api/v2/submissions` | è·å–æäº¤åˆ—è¡¨ |
| POST | `/api/v2/submissions/{id}/regrade` | é‡æ–°æ‰¹æ”¹ |
| POST | `/api/v2/annotations` | ä¿å­˜æ•™å¸ˆæ‰¹æ³¨ |
| WS | `/ws/grading/{submissionId}` | WebSocketè¿›åº¦æ¨é€ |

### 8.2 APIè¯¦ç»†è®¾è®¡

#### 8.2.1 æäº¤ä½œä¸š

```typescript
POST /api/v2/submissions
Content-Type: multipart/form-data
Authorization: Bearer {token}

Request:
{
  assignmentId: string;
  files: File[];        // æœ€å¤š20ä¸ªæ–‡ä»¶
  note?: string;        // å¯é€‰å¤‡æ³¨
}

Response: 201 Created
{
  submissionId: string;
  status: "processing";
  message: "ä½œä¸šå·²æäº¤ï¼Œæ­£åœ¨æ‰¹æ”¹ä¸­...";
  estimatedTime: 20;    // é¢„è®¡æ—¶é—´(ç§’)
}

Error: 400 Bad Request
{
  error: "INVALID_FILE_FORMAT";
  message: "ä¸æ”¯æŒçš„æ–‡ä»¶æ ¼å¼";
}
```

#### 8.2.2 è·å–æ‰¹æ”¹ç»“æœ

```typescript
GET /api/v2/submissions/{id}/result
Authorization: Bearer {token}

Response: 200 OK
{
  submissionId: string;
  status: "completed";
  totalScore: 85;
  maxScore: 100;

  // é¡µé¢æ±‡æ€»
  pages: [
    {
      pageIndex: 0;
      imageUrl: string;
      status: "perfect" | "warning" | "error";
      questionCount: 3;
      errorCount: 0;
    }
  ],

  // é¢˜ç›®è¯¦æƒ…
  questions: [
    {
      questionIndex: 0;
      questionNumber: "ç¬¬1é¢˜";
      pageIndex: 0;
      bbox: { x: 0, y: 0, width: 800, height: 400 };
      score: 10;
      maxScore: 10;
      status: "correct";

      // é”™è¯¯åˆ—è¡¨
      errors: [
        {
          id: string;
          type: "è®¡ç®—é”™è¯¯";
          description: "ç¬¬äºŒæ­¥è®¡ç®—é”™è¯¯...";
          deduction: 2.0;
          suggestion: "ä½¿ç”¨ä»£å…¥æ¶ˆå…ƒæ³•...";
          position: { x: 150, y: 200, width: 200, height: 50 };
          positionType: "area";
          positionConfidence: 0.95;
          croppedImage: string;
        }
      ],

      // æ­£ç¡®éƒ¨åˆ†
      correctParts: [
        {
          description: "ç¬¬ä¸€æ­¥åˆ—æ–¹ç¨‹æ­£ç¡®";
          position: { x: 150, y: 150, width: 200, height: 40 };
          croppedImage: string;
        }
      ],

      feedback: "æ•´ä½“æ€è·¯æ­£ç¡®...";
    }
  ],

  // æ‰€æœ‰é”™è¯¯çš„æ‰å¹³åˆ—è¡¨
  allErrors: [...],

  // æ€»ä½“åé¦ˆ
  overallFeedback: "æœ¬æ¬¡ä½œä¸šå®Œæˆæƒ…å†µè‰¯å¥½...",

  // å¤„ç†ä¿¡æ¯
  processingTimeMs: 15000;
  gradedAt: "2025-10-05T10:30:00Z";
}
```

#### 8.2.3 è·å–æ‰¹æ”¹çŠ¶æ€

```typescript
GET /api/v2/submissions/{id}/status
Authorization: Bearer {token}

Response: 200 OK
{
  submissionId: string;
  status: "processing";
  stage: "grading";      // preprocessing/grading/annotating/completed
  progress: 60;          // 0-100
  message: "æ­£åœ¨æ‰¹æ”¹ç¬¬9é¢˜...";
  estimatedTimeRemaining: 8;  // ç§’
}
```

#### 8.2.4 WebSocketè¿›åº¦æ¨é€

```typescript
WS /ws/grading/{submissionId}
Authorization: Bearer {token}

// å®¢æˆ·ç«¯è¿æ¥
ws.connect('/ws/grading/uuid');

// æœåŠ¡ç«¯æ¨é€ - è¿›åº¦äº‹ä»¶
{
  type: "grading_progress";
  submissionId: string;
  stage: "preprocessing" | "grading" | "annotating" | "completed";
  progress: 0-100;
  message: string;
  timestamp: string;
  details?: {
    currentQuestion: number;
    totalQuestions: number;
  };
}

// å®Œæˆäº‹ä»¶
{
  type: "grading_completed";
  submissionId: string;
  totalScore: 85;
  maxScore: 100;
  errorCount: 8;
  timestamp: string;
}

// é”™è¯¯äº‹ä»¶
{
  type: "grading_failed";
  submissionId: string;
  error: string;
  message: string;
  timestamp: string;
}
```

#### 8.2.5 ä¿å­˜æ•™å¸ˆæ‰¹æ³¨

```typescript
POST /api/v2/annotations
Authorization: Bearer {token}
Content-Type: application/json

Request:
{
  submissionId: string;
  annotationType: "drawing" | "text" | "shape";
  annotationData: object;  // Fabric.js JSON
  annotatedImageUrl?: string;
}

Response: 201 Created
{
  annotationId: string;
  message: "æ‰¹æ³¨å·²ä¿å­˜";
}
```

---

## 9. å‰ç«¯è®¾è®¡

### 9.1 é¡µé¢ç»“æ„

```
frontend/app/(dashboard)/
â”œâ”€â”€ assignments/[id]/submit/page.tsx      # ä½œä¸šæäº¤
â””â”€â”€ submissions/
    â”œâ”€â”€ page.tsx                          # å†å²è®°å½•
    â””â”€â”€ [id]/
        â”œâ”€â”€ page.tsx                      # æ‰¹æ”¹ç»“æœ
        â”œâ”€â”€ grading/page.tsx              # æ‰¹æ”¹è¿›åº¦
        â””â”€â”€ annotate/page.tsx             # æ•™å¸ˆæ‰¹æ³¨
```

### 9.2 æ¡Œé¢ç«¯å¸ƒå±€ (ä¸‰æ )

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ‰¹æ”¹ç»“æœ | å¾—åˆ†: 85/100 | é”™è¯¯: 8ä¸ª | [âœï¸ æ‰¹æ³¨æ¨¡å¼]        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚ â”‚ ğŸ“‘ ç›®å½•â”‚  â”‚ ğŸ“„ ä½œä¸šå›¾ç‰‡      â”‚  â”‚ ğŸ“ æ‰¹æ”¹è¯¦æƒ…      â”‚    â”‚
â”‚ â”‚ (15%)  â”‚  â”‚ (55%)            â”‚  â”‚ (30%)            â”‚    â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 9.3 ç§»åŠ¨ç«¯å¸ƒå±€ (ä¸‰ç§è§†å›¾)

- **å›¾ç‰‡æ¨¡å¼**: å¯ç¼©æ”¾çš„åŸå›¾ + é”™è¯¯æ ‡è®°
- **å¡ç‰‡æ¨¡å¼**: å·¦å³æ»‘åŠ¨æŸ¥çœ‹æ¯ä¸ªæ‰¹æ”¹ç‚¹
- **è®²è§£æ¨¡å¼**: æ—¶é—´è½´å¼é€æ­¥è®²è§£

### 9.4 æ ¸å¿ƒç»„ä»¶ä»£ç ç¤ºä¾‹

#### 9.4.1 APIå®¢æˆ·ç«¯

```typescript
// lib/api/grading.ts

export const gradingApi = {
  // æäº¤ä½œä¸š
  submitAssignment: async (data: SubmitData) => {
    const formData = new FormData();
    formData.append('assignmentId', data.assignmentId);
    data.files.forEach(file => formData.append('files', file));
    if (data.note) formData.append('note', data.note);

    const response = await fetch('/api/v2/submissions', {
      method: 'POST',
      body: formData,
    });
    return response.json();
  },

  // è·å–æ‰¹æ”¹ç»“æœ
  getResult: async (submissionId: string) => {
    const response = await fetch(`/api/v2/submissions/${submissionId}/result`);
    return response.json();
  },

  // è·å–æ‰¹æ”¹çŠ¶æ€
  getStatus: async (submissionId: string) => {
    const response = await fetch(`/api/v2/submissions/${submissionId}/status`);
    return response.json();
  },

  // è·å–æäº¤åˆ—è¡¨
  getSubmissions: async (params?: any) => {
    const query = new URLSearchParams(params);
    const response = await fetch(`/api/v2/submissions?${query}`);
    return response.json();
  },

  // é‡æ–°æ‰¹æ”¹
  regrade: async (submissionId: string) => {
    const response = await fetch(`/api/v2/submissions/${submissionId}/regrade`, {
      method: 'POST',
    });
    return response.json();
  },
};
```

#### 9.4.2 React Query Hooks

```typescript
// hooks/useGrading.ts

import { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';
import { gradingApi } from '@/lib/api/grading';

// æäº¤ä½œä¸š
export function useSubmitAssignment() {
  const queryClient = useQueryClient();

  return useMutation({
    mutationFn: gradingApi.submitAssignment,
    onSuccess: () => {
      queryClient.invalidateQueries({ queryKey: ['submissions'] });
    },
  });
}

// è·å–æ‰¹æ”¹ç»“æœ
export function useGradingResult(submissionId: string) {
  return useQuery({
    queryKey: ['grading', submissionId],
    queryFn: () => gradingApi.getResult(submissionId),
    refetchInterval: (data) => {
      // å¦‚æœè¿˜åœ¨å¤„ç†ä¸­ï¼Œæ¯5ç§’è½®è¯¢ä¸€æ¬¡
      return data?.status === 'processing' ? 5000 : false;
    },
  });
}

// è·å–æ‰¹æ”¹çŠ¶æ€
export function useGradingStatus(submissionId: string) {
  return useQuery({
    queryKey: ['grading-status', submissionId],
    queryFn: () => gradingApi.getStatus(submissionId),
    refetchInterval: 2000, // æ¯2ç§’è½®è¯¢
  });
}
```

#### 9.4.3 WebSocket Hook

```typescript
// hooks/useGradingProgress.ts

import { useEffect, useState } from 'react';
import { io, Socket } from 'socket.io-client';

export function useGradingProgress(submissionId: string) {
  const [progress, setProgress] = useState(0);
  const [stage, setStage] = useState('');
  const [message, setMessage] = useState('');
  const [isCompleted, setIsCompleted] = useState(false);
  const [error, setError] = useState<string | null>(null);

  useEffect(() => {
    const socket: Socket = io({
      path: '/ws',
      auth: { token: localStorage.getItem('token') },
    });

    socket.emit('join_grading', submissionId);

    socket.on('grading_progress', (data) => {
      if (data.submissionId === submissionId) {
        setProgress(data.progress || 0);
        setStage(data.stage || '');
        setMessage(data.message || '');
      }
    });

    socket.on('grading_completed', (data) => {
      if (data.submissionId === submissionId) {
        setProgress(100);
        setIsCompleted(true);
      }
    });

    socket.on('grading_failed', (data) => {
      if (data.submissionId === submissionId) {
        setError(data.error || 'æ‰¹æ”¹å¤±è´¥');
      }
    });

    return () => {
      socket.emit('leave_grading', submissionId);
      socket.disconnect();
    };
  }, [submissionId]);

  return { progress, stage, message, isCompleted, error };
}
```

#### 9.4.4 æ¡Œé¢ç«¯æ‰¹æ”¹ç»“æœç»„ä»¶

```typescript
// components/grading/DesktopGradingView.tsx

interface DesktopGradingViewProps {
  submission: Submission;
  gradingResult: GradingResult;
  isTeacher: boolean;
}

export function DesktopGradingView({
  submission,
  gradingResult,
  isTeacher,
}: DesktopGradingViewProps) {
  const [currentPageIndex, setCurrentPageIndex] = useState(0);
  const [currentQuestionIndex, setCurrentQuestionIndex] = useState<number | null>(null);

  return (
    <div className="h-screen flex flex-col">
      {/* é¡¶éƒ¨å·¥å…·æ  */}
      <Toolbar
        totalScore={gradingResult.totalScore}
        maxScore={gradingResult.maxScore}
        errorCount={gradingResult.allErrors.length}
        isTeacher={isTeacher}
      />

      {/* ä¸‰æ å¸ƒå±€ */}
      <div className="flex-1 flex overflow-hidden">
        {/* å·¦ä¾§: å¯¼èˆª (15%) */}
        <NavigationSidebar
          gradingResult={gradingResult}
          currentPageIndex={currentPageIndex}
          currentQuestionIndex={currentQuestionIndex}
          onPageChange={setCurrentPageIndex}
          onQuestionChange={setCurrentQuestionIndex}
        />

        {/* ä¸­é—´: å›¾ç‰‡ (55%) */}
        <ImageViewer
          page={gradingResult.pages[currentPageIndex]}
          currentQuestion={getCurrentQuestion()}
          onQuestionClick={setCurrentQuestionIndex}
        />

        {/* å³ä¾§: è¯¦æƒ… (30%) */}
        <GradingDetail
          question={getCurrentQuestion()}
        />
      </div>
    </div>
  );
}
```

---

## 10. å®æ–½è®¡åˆ’

### 10.1 æ—¶é—´è¡¨

| é˜¶æ®µ | æ—¶é—´ | ä»»åŠ¡ |
|------|------|------|
| **Week 1** | Day 1-5 | åç«¯å®Œå–„ |
| **Week 2** | Day 6-10 | å‰ç«¯å¼€å‘ |

### 10.2 è¯¦ç»†ä»»åŠ¡

#### Week 1: åç«¯å®Œå–„

**Day 1-2**: Agentç³»ç»Ÿå®ç°
- [ ] åˆ›å»ºPreprocessAgent
- [ ] åˆ›å»ºLocationAnnotationAgent
- [ ] æ›´æ–°GradingOrchestrator

**Day 3**: æ•°æ®åº“é›†æˆ
- [ ] æ›´æ–°æ•°æ®åº“æ¨¡å‹
- [ ] åˆ›å»ºæ•°æ®åº“è¿ç§»
- [ ] åˆ›å»ºæ•°æ®æœåŠ¡

**Day 4**: WebSocketå®æ—¶é€šçŸ¥
- [ ] å®ç°WebSocketç®¡ç†å™¨
- [ ] å®šä¹‰è¿›åº¦äº‹ä»¶
- [ ] é›†æˆåˆ°Orchestrator

**Day 5**: APIå®Œå–„ä¸æµ‹è¯•
- [ ] å®Œå–„APIç«¯ç‚¹
- [ ] æ·»åŠ é”™è¯¯å¤„ç†
- [ ] é›†æˆæµ‹è¯•

#### Week 2: å‰ç«¯å¼€å‘

**Day 6-7**: å‰ç«¯é¡µé¢å¼€å‘
- [ ] æ¡Œé¢ç«¯é¡µé¢
- [ ] ç§»åŠ¨ç«¯é¡µé¢
- [ ] æ•™å¸ˆæ‰¹æ³¨é¡µé¢

**Day 8**: å‰ç«¯APIé›†æˆ
- [ ] åˆ›å»ºAPIå®¢æˆ·ç«¯
- [ ] React Query Hooks
- [ ] WebSocket Hook

**Day 9**: ç«¯åˆ°ç«¯æµ‹è¯•
- [ ] æ‰‹åŠ¨æµ‹è¯•
- [ ] è‡ªåŠ¨åŒ–æµ‹è¯•
- [ ] æ€§èƒ½æµ‹è¯•

**Day 10**: ä¼˜åŒ–ä¸éƒ¨ç½²
- [ ] UI/UXä¼˜åŒ–
- [ ] æ€§èƒ½ä¼˜åŒ–
- [ ] æ–‡æ¡£å®Œå–„

---

## 11. éªŒæ”¶æ ‡å‡†

### 11.1 åŠŸèƒ½éªŒæ”¶

| åŠŸèƒ½ | éªŒæ”¶æ ‡å‡† | çŠ¶æ€ |
|------|----------|------|
| ä½œä¸šæäº¤ | ç”¨æˆ·å¯ä»¥ä¸Šä¼ å›¾ç‰‡å¹¶è§¦å‘æ‰¹æ”¹ | [ ] |
| é¢˜ç›®åˆ†æ®µ | å‡†ç¡®åº¦ > 90% | [ ] |
| æ‰¹æ”¹è¯†åˆ« | å‡†ç¡®åº¦ > 95% | [ ] |
| ä½ç½®æ ‡æ³¨ | å‡†ç¡®åº¦ > 80% | [ ] |
| å®æ—¶è¿›åº¦ | WebSocketå»¶è¿Ÿ < 100ms | [ ] |
| ç»“æœå±•ç¤º | å¤šé¡µå¤šé¢˜å¯¼èˆªæµç•… | [ ] |

### 11.2 æ€§èƒ½éªŒæ”¶

| æŒ‡æ ‡ | ç›®æ ‡å€¼ | çŠ¶æ€ |
|------|--------|------|
| æ‰¹æ”¹æ—¶é—´ (15é¢˜) | < 20ç§’ | [ ] |
| APIå“åº”æ—¶é—´ | < 500ms | [ ] |
| WebSocketå»¶è¿Ÿ | < 100ms | [ ] |
| é¡µé¢åŠ è½½æ—¶é—´ | < 2ç§’ | [ ] |

---

## 12. é£é™©è¯„ä¼°

| é£é™© | ç­‰çº§ | ç¼“è§£æªæ–½ |
|------|------|----------|
| OCRè¯†åˆ«ä¸å‡†ç¡® | ä¸­ | å¤šå¼•æ“æŠ•ç¥¨ï¼›æ‰‹åŠ¨è°ƒæ•´ |
| ä½ç½®æ ‡æ³¨ä¸å‡†ç¡® | ä¸­ | é™ä½é˜ˆå€¼ï¼›æ•™å¸ˆè°ƒæ•´ |
| WebSocketä¸ç¨³å®š | ä½ | æ–­çº¿é‡è¿ï¼›é™çº§è½®è¯¢ |

---

## 13. æˆæœ¬åˆ†æ

### 13.1 å•æ¬¡æ‰¹æ”¹æˆæœ¬ (10é¡µ15é¢˜)

```
é¢„å¤„ç† (OCR):        $0.010
æ‰¹æ”¹ (15é¢˜):         $0.000645
ä½ç½®æ ‡æ³¨ (15é¢˜):     $0.000015
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
æ€»è®¡:                $0.010660
```

### 13.2 å¹´åº¦æˆæœ¬ (12000æ¬¡æ‰¹æ”¹)

```
æ‰¹æ”¹æˆæœ¬:            $127.92
äº‘å­˜å‚¨:              $27.60
æ•°æ®åº“:              $60.00
éƒ¨ç½²å¹³å°:            $60.00
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
æ€»è®¡:                $275.52/å¹´
```

---

## 14. æ€»ç»“

### 14.1 Phase 2 æ ¸å¿ƒä»·å€¼

**è®©AIæ‰¹æ”¹ç³»ç»ŸçœŸæ­£å¯ç”¨ï¼Œæä¾›å®Œæ•´çš„ç”¨æˆ·ä½“éªŒ**

### 14.2 å…³é”®åˆ›æ–°

1. **Multi-Agentåä½œ** - ä¸‰ä¸ªAgentåˆ†å·¥åä½œ
2. **ç²¾ç¡®ä½ç½®æ ‡æ³¨** - LocationAgentåƒç´ çº§å®šä½
3. **å¤šé¡µå¤šé¢˜æ”¯æŒ** - å®Œå–„çš„å¯¼èˆªç³»ç»Ÿ
4. **æ•™å¸ˆæ‰¹æ³¨å·¥å…·** - æ‰‹åŠ¨æ‰¹æ³¨å’Œè°ƒæ•´
5. **å“åº”å¼è®¾è®¡** - æ¡Œé¢ç«¯å’Œç§»åŠ¨ç«¯ä¸åŒä½“éªŒ

### 14.3 é¢„æœŸæˆæœ

- âœ… ç”¨æˆ·å¯ä»¥æäº¤ä½œä¸šå¹¶æŸ¥çœ‹æ‰¹æ”¹
- âœ… æ”¯æŒ10é¡µä»¥ä¸Šã€15é¢˜ä»¥ä¸Šçš„ä½œä¸š
- âœ… ä½ç½®æ ‡æ³¨å‡†ç¡®åº¦ > 80%
- âœ… æ‰¹æ”¹æ—¶é—´ < 20ç§’
- âœ… å¹´åº¦æˆæœ¬ < $300

---

**éœ€æ±‚æ–‡æ¡£å®Œæˆæ—¶é—´**: 2025-10-05  
**æ–‡æ¡£ç‰ˆæœ¬**: v2.0  
**çŠ¶æ€**: âœ… å®Œæˆ  
**ä¸‹ä¸€æ­¥**: å¼€å§‹å®æ–½ ğŸš€

