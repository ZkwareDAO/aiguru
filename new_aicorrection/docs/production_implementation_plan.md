# ç”Ÿäº§çº§ LangGraph AI æ‰¹æ”¹ç³»ç»Ÿ - å®æ–½è®¡åˆ’

## ğŸ“… å¼€å‘é˜¶æ®µè§„åˆ’

### Phase 1: æ ¸å¿ƒåŠŸèƒ½å®ç°ï¼ˆç¬¬1-2å‘¨ï¼‰
**ç›®æ ‡**ï¼šå®ç°åŸºç¡€çš„é€é¢˜æ‰¹æ”¹åŠŸèƒ½

#### 1.1 InputParser Agent å®ç°
- **å·¥ä½œé‡**ï¼š2å¤©
- **ä»»åŠ¡**ï¼š
  - [ ] å®ç°é¢˜ç›®è§£æé€»è¾‘ï¼ˆæ­£åˆ™è¡¨è¾¾å¼è¯†åˆ«é¢˜ç›®è¾¹ç•Œï¼‰
  - [ ] å®ç°å­¦ç”Ÿä¿¡æ¯æå–ï¼ˆä»æ–‡ä»¶åå’Œæ–‡æœ¬ï¼‰
  - [ ] å®ç°ç­”æ¡ˆåŒ¹é…ï¼ˆå°†ç­”æ¡ˆä¸é¢˜ç›®å…³è”ï¼‰
  - [ ] ç¼–å†™å•å…ƒæµ‹è¯•

**æŠ€æœ¯éš¾ç‚¹**ï¼š
- é¢˜ç›®è¾¹ç•Œè¯†åˆ«ï¼ˆä¸åŒæ ¼å¼çš„é¢˜ç›®ç¼–å·ï¼‰
- å­¦ç”Ÿä¿¡æ¯æå–ï¼ˆå¤šç§æ ¼å¼æ”¯æŒï¼‰

**è§£å†³æ–¹æ¡ˆ**ï¼š
- ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼åº“å¤„ç†å¤šç§æ ¼å¼
- æ”¯æŒç”¨æˆ·è‡ªå®šä¹‰é¢˜ç›®åˆ†éš”ç¬¦

#### 1.2 QuestionAnalyzer Agent å®ç°
- **å·¥ä½œé‡**ï¼š2å¤©
- **ä»»åŠ¡**ï¼š
  - [ ] å®ç°é¢˜å‹è¯†åˆ«ï¼ˆé€‰æ‹©é¢˜ã€å¡«ç©ºé¢˜ã€è§£ç­”é¢˜ç­‰ï¼‰
  - [ ] å®ç°éš¾åº¦è¯„ä¼°
  - [ ] å®ç°æ‰¹æ”¹ç­–ç•¥é€‰æ‹©
  - [ ] ç¼–å†™å•å…ƒæµ‹è¯•

**æŠ€æœ¯éš¾ç‚¹**ï¼š
- å‡†ç¡®çš„é¢˜å‹è¯†åˆ«
- éš¾åº¦è¯„ä¼°çš„å‡†ç¡®æ€§

**è§£å†³æ–¹æ¡ˆ**ï¼š
- ä½¿ç”¨LLMè¾…åŠ©é¢˜å‹è¯†åˆ«
- åŸºäºé¢˜ç›®é•¿åº¦å’Œå…³é”®è¯çš„éš¾åº¦è¯„ä¼°

#### 1.3 RubricInterpreter Agent å®ç°
- **å·¥ä½œé‡**ï¼š2å¤©
- **ä»»åŠ¡**ï¼š
  - [ ] å®ç°è¯„åˆ†æ ‡å‡†è§£æ
  - [ ] å®ç°è¯„åˆ†ç»´åº¦æå–
  - [ ] å®ç°è¯„åˆ†è§„åˆ™ç”Ÿæˆ
  - [ ] ç¼–å†™å•å…ƒæµ‹è¯•

**æŠ€æœ¯éš¾ç‚¹**ï¼š
- ä»è‡ªç”±æ ¼å¼çš„è¯„åˆ†æ ‡å‡†ä¸­æå–ç»“æ„åŒ–ä¿¡æ¯

**è§£å†³æ–¹æ¡ˆ**ï¼š
- ä½¿ç”¨LLMè¿›è¡Œæ™ºèƒ½è§£æ
- æä¾›æ ‡å‡†åŒ–çš„è¯„åˆ†æ ‡å‡†æ¨¡æ¿

#### 1.4 QuestionGrader Agent å®ç°
- **å·¥ä½œé‡**ï¼š3å¤©
- **ä»»åŠ¡**ï¼š
  - [ ] å®ç°åŸºç¡€æ‰¹æ”¹é€»è¾‘
  - [ ] å®ç°é”™è¯¯è¯†åˆ«
  - [ ] å®ç°åé¦ˆç”Ÿæˆ
  - [ ] å®ç°çŸ¥è¯†ç‚¹æå–
  - [ ] ç¼–å†™å•å…ƒæµ‹è¯•

**æŠ€æœ¯éš¾ç‚¹**ï¼š
- å‡†ç¡®çš„é”™è¯¯è¯†åˆ«
- æœ‰æ„ä¹‰çš„åé¦ˆç”Ÿæˆ
- çŸ¥è¯†ç‚¹çš„å‡†ç¡®æå–

**è§£å†³æ–¹æ¡ˆ**ï¼š
- ä½¿ç”¨ç²¾å¿ƒè®¾è®¡çš„prompt
- å¤šè½®LLMè°ƒç”¨ç¡®ä¿è´¨é‡
- å»ºç«‹çŸ¥è¯†ç‚¹åº“

#### 1.5 ResultAggregator Agent å®ç°
- **å·¥ä½œé‡**ï¼š1å¤©
- **ä»»åŠ¡**ï¼š
  - [ ] å®ç°ç»“æœèšåˆé€»è¾‘
  - [ ] å®ç°ç»Ÿè®¡è®¡ç®—
  - [ ] å®ç°æŠ¥å‘Šç”Ÿæˆ
  - [ ] ç¼–å†™å•å…ƒæµ‹è¯•

#### 1.6 LangGraph å·¥ä½œæµé›†æˆ
- **å·¥ä½œé‡**ï¼š2å¤©
- **ä»»åŠ¡**ï¼š
  - [ ] è®¾è®¡å·¥ä½œæµå›¾
  - [ ] å®ç°AgentèŠ‚ç‚¹
  - [ ] å®ç°è¾¹å’Œè·¯ç”±
  - [ ] å®ç°æµå¼å¤„ç†
  - [ ] ç¼–å†™é›†æˆæµ‹è¯•

**æŠ€æœ¯éš¾ç‚¹**ï¼š
- æµå¼å¤„ç†çš„å®ç°
- å¹¶è¡Œå¤„ç†çš„åè°ƒ

**è§£å†³æ–¹æ¡ˆ**ï¼š
- ä½¿ç”¨LangGraphçš„stream API
- ä½¿ç”¨æ¡ä»¶è¾¹å®ç°åŠ¨æ€è·¯ç”±

---

### Phase 2: æ•°æ®åº“å’ŒæŒä¹…åŒ–ï¼ˆç¬¬3å‘¨ï¼‰
**ç›®æ ‡**ï¼šå®ç°æ•°æ®å­˜å‚¨å’ŒæŸ¥è¯¢åŠŸèƒ½

#### 2.1 æ•°æ®åº“è®¾è®¡å’Œåˆ›å»º
- **å·¥ä½œé‡**ï¼š1å¤©
- **ä»»åŠ¡**ï¼š
  - [ ] è®¾è®¡è¡¨ç»“æ„
  - [ ] åˆ›å»ºæ•°æ®åº“
  - [ ] åˆ›å»ºç´¢å¼•
  - [ ] ç¼–å†™è¿ç§»è„šæœ¬

#### 2.2 DataPersistence Agent å®ç°
- **å·¥ä½œé‡**ï¼š2å¤©
- **ä»»åŠ¡**ï¼š
  - [ ] å®ç°æ•°æ®å­˜å‚¨é€»è¾‘
  - [ ] å®ç°å…³ç³»ç®¡ç†
  - [ ] å®ç°äº‹åŠ¡å¤„ç†
  - [ ] ç¼–å†™å•å…ƒæµ‹è¯•

#### 2.3 æ•°æ®æŸ¥è¯¢æ¥å£
- **å·¥ä½œé‡**ï¼š2å¤©
- **ä»»åŠ¡**ï¼š
  - [ ] å®ç°å­¦ç”ŸæŸ¥è¯¢
  - [ ] å®ç°æ‰¹æ”¹ç»“æœæŸ¥è¯¢
  - [ ] å®ç°ç»Ÿè®¡æ•°æ®æŸ¥è¯¢
  - [ ] ç¼–å†™APIæ–‡æ¡£

---

### Phase 3: Streamlit é›†æˆï¼ˆç¬¬4å‘¨ï¼‰
**ç›®æ ‡**ï¼šå®ç°ç”¨æˆ·ç•Œé¢å’Œäº¤äº’

#### 3.1 UI è®¾è®¡å’Œå®ç°
- **å·¥ä½œé‡**ï¼š3å¤©
- **ä»»åŠ¡**ï¼š
  - [ ] è®¾è®¡UIæµç¨‹
  - [ ] å®ç°æ–‡ä»¶ä¸Šä¼ 
  - [ ] å®ç°å­¦ç”Ÿä¿¡æ¯è¾“å…¥
  - [ ] å®ç°æ‰¹æ”¹æ¨¡å¼é€‰æ‹©
  - [ ] å®ç°è¿›åº¦æ˜¾ç¤º
  - [ ] å®ç°ç»“æœå±•ç¤º

**æŠ€æœ¯éš¾ç‚¹**ï¼š
- å®æ—¶è¿›åº¦æ›´æ–°
- å¤§æ–‡ä»¶ä¸Šä¼ å¤„ç†

**è§£å†³æ–¹æ¡ˆ**ï¼š
- ä½¿ç”¨Streamlitçš„session_state
- ä½¿ç”¨åˆ†å—ä¸Šä¼ 

#### 3.2 æ•°æ®åˆ†æå’Œå¯è§†åŒ–
- **å·¥ä½œé‡**ï¼š2å¤©
- **ä»»åŠ¡**ï¼š
  - [ ] å®ç°ç»Ÿè®¡æ•°æ®å±•ç¤º
  - [ ] å®ç°å›¾è¡¨å¯è§†åŒ–
  - [ ] å®ç°æ•°æ®å¯¼å‡º

#### 3.3 é›†æˆæµ‹è¯•
- **å·¥ä½œé‡**ï¼š2å¤©
- **ä»»åŠ¡**ï¼š
  - [ ] ç«¯åˆ°ç«¯æµ‹è¯•
  - [ ] æ€§èƒ½æµ‹è¯•
  - [ ] ç”¨æˆ·ä½“éªŒæµ‹è¯•

---

### Phase 4: ä¼˜åŒ–å’Œéƒ¨ç½²ï¼ˆç¬¬5å‘¨ï¼‰
**ç›®æ ‡**ï¼šæ€§èƒ½ä¼˜åŒ–å’Œç”Ÿäº§éƒ¨ç½²

#### 4.1 æ€§èƒ½ä¼˜åŒ–
- **å·¥ä½œé‡**ï¼š2å¤©
- **ä»»åŠ¡**ï¼š
  - [ ] Tokenä½¿ç”¨ä¼˜åŒ–
  - [ ] ç¼“å­˜æœºåˆ¶å®ç°
  - [ ] å¹¶è¡Œå¤„ç†ä¼˜åŒ–
  - [ ] æ€§èƒ½æµ‹è¯•å’ŒåŸºå‡†

#### 4.2 é”™è¯¯å¤„ç†å’Œæ—¥å¿—
- **å·¥ä½œé‡**ï¼š1å¤©
- **ä»»åŠ¡**ï¼š
  - [ ] å®ç°é”™è¯¯å¤„ç†
  - [ ] å®ç°æ—¥å¿—è®°å½•
  - [ ] å®ç°ç›‘æ§å‘Šè­¦

#### 4.3 éƒ¨ç½²å’Œä¸Šçº¿
- **å·¥ä½œé‡**ï¼š2å¤©
- **ä»»åŠ¡**ï¼š
  - [ ] éƒ¨ç½²åˆ°Railway
  - [ ] é…ç½®ç¯å¢ƒå˜é‡
  - [ ] è¿›è¡Œä¸Šçº¿æµ‹è¯•
  - [ ] ç¼–å†™éƒ¨ç½²æ–‡æ¡£

#### 4.4 æ–‡æ¡£å’ŒåŸ¹è®­
- **å·¥ä½œé‡**ï¼š1å¤©
- **ä»»åŠ¡**ï¼š
  - [ ] ç¼–å†™ç”¨æˆ·æ‰‹å†Œ
  - [ ] ç¼–å†™APIæ–‡æ¡£
  - [ ] ç¼–å†™è¿ç»´æ‰‹å†Œ
  - [ ] è¿›è¡Œç”¨æˆ·åŸ¹è®­

---

## ğŸ¯ ä¼˜å…ˆçº§æ’åº

### å¿…åšé¡¹ï¼ˆP0ï¼‰
1. **InputParser Agent** - åŸºç¡€åŠŸèƒ½
2. **QuestionGrader Agent** - æ ¸å¿ƒåŠŸèƒ½
3. **ResultAggregator Agent** - ç»“æœæ±‡æ€»
4. **LangGraph å·¥ä½œæµ** - æµç¨‹ç¼–æ’
5. **DataPersistence Agent** - æ•°æ®å­˜å‚¨
6. **Streamlit åŸºç¡€UI** - ç”¨æˆ·ç•Œé¢

### é‡è¦é¡¹ï¼ˆP1ï¼‰
1. **QuestionAnalyzer Agent** - é¢˜å‹è¯†åˆ«
2. **RubricInterpreter Agent** - è¯„åˆ†æ ‡å‡†è§£æ
3. **æµå¼å¤„ç†** - å®æ—¶åé¦ˆ
4. **æ•°æ®åˆ†æ** - ç»Ÿè®¡åŠŸèƒ½
5. **ç¼“å­˜æœºåˆ¶** - æ€§èƒ½ä¼˜åŒ–

### å¯é€‰é¡¹ï¼ˆP2ï¼‰
1. **é«˜çº§å¯è§†åŒ–** - æ•°æ®å±•ç¤º
2. **å¯¼å‡ºåŠŸèƒ½** - ç»“æœå¯¼å‡º
3. **å¤šè¯­è¨€æ”¯æŒ** - å›½é™…åŒ–
4. **æ–­ç‚¹ç»­ä¼ ** - å®¹é”™èƒ½åŠ›

---

## ğŸ”§ æŠ€æœ¯éš¾ç‚¹å’Œè§£å†³æ–¹æ¡ˆ

### éš¾ç‚¹ 1ï¼šå‡†ç¡®çš„é¢˜å‹è¯†åˆ«
**é—®é¢˜**ï¼šä¸åŒæ ¼å¼çš„é¢˜ç›®ï¼Œé¢˜å‹è¯†åˆ«å›°éš¾

**è§£å†³æ–¹æ¡ˆ**ï¼š
- ä½¿ç”¨LLMè¾…åŠ©è¯†åˆ«
- å»ºç«‹é¢˜å‹ç‰¹å¾åº“
- æ”¯æŒç”¨æˆ·æ‰‹åŠ¨æŒ‡å®š

**é¢„ä¼°å·¥ä½œé‡**ï¼š2å¤©

---

### éš¾ç‚¹ 2ï¼šæœ‰æ„ä¹‰çš„åé¦ˆç”Ÿæˆ
**é—®é¢˜**ï¼šç”Ÿæˆçš„åé¦ˆè¿‡äºç¬¼ç»Ÿæˆ–ä¸å‡†ç¡®

**è§£å†³æ–¹æ¡ˆ**ï¼š
- ç²¾å¿ƒè®¾è®¡prompt
- å¤šè½®LLMè°ƒç”¨
- å»ºç«‹åé¦ˆæ¨¡æ¿åº“
- äººå·¥å®¡æ ¸å’Œä¼˜åŒ–

**é¢„ä¼°å·¥ä½œé‡**ï¼š3å¤©

---

### éš¾ç‚¹ 3ï¼šçŸ¥è¯†ç‚¹çš„å‡†ç¡®æå–
**é—®é¢˜**ï¼šä»ç­”å·ä¸­å‡†ç¡®æå–çŸ¥è¯†ç‚¹å›°éš¾

**è§£å†³æ–¹æ¡ˆ**ï¼š
- å»ºç«‹çŸ¥è¯†ç‚¹åº“
- ä½¿ç”¨LLMè¿›è¡Œè¯­ä¹‰åŒ¹é…
- æ”¯æŒæ•™å¸ˆè‡ªå®šä¹‰çŸ¥è¯†ç‚¹

**é¢„ä¼°å·¥ä½œé‡**ï¼š2å¤©

---

### éš¾ç‚¹ 4ï¼šæµå¼å¤„ç†çš„å®ç°
**é—®é¢˜**ï¼šå®ç°å®æ—¶çš„æµå¼å¤„ç†å’Œè¿›åº¦æ˜¾ç¤º

**è§£å†³æ–¹æ¡ˆ**ï¼š
- ä½¿ç”¨LangGraphçš„stream API
- ä½¿ç”¨Streamlitçš„session_state
- ä½¿ç”¨WebSocketæˆ–Server-Sent Events

**é¢„ä¼°å·¥ä½œé‡**ï¼š2å¤©

---

### éš¾ç‚¹ 5ï¼šTokenæˆæœ¬æ§åˆ¶
**é—®é¢˜**ï¼šå¤§é‡æ‰¹æ”¹å¯¼è‡´Tokenæˆæœ¬è¿‡é«˜

**è§£å†³æ–¹æ¡ˆ**ï¼š
- å‹ç¼©è¾“å…¥å†…å®¹
- å®ç°ç¼“å­˜æœºåˆ¶
- ä½¿ç”¨æ›´ä¾¿å®œçš„æ¨¡å‹
- æ‰¹é‡å¤„ç†ä¼˜åŒ–

**é¢„ä¼°å·¥ä½œé‡**ï¼š2å¤©

---

## ğŸ“Š å·¥ä½œé‡ä¼°è®¡

| é˜¶æ®µ | ä»»åŠ¡ | å·¥ä½œé‡ | äººæ•° |
|------|------|--------|------|
| Phase 1 | æ ¸å¿ƒAgentå®ç° | 12å¤© | 2äºº |
| Phase 2 | æ•°æ®åº“å’ŒæŒä¹…åŒ– | 5å¤© | 1äºº |
| Phase 3 | Streamlité›†æˆ | 7å¤© | 1äºº |
| Phase 4 | ä¼˜åŒ–å’Œéƒ¨ç½² | 6å¤© | 1äºº |
| **æ€»è®¡** | | **30å¤©** | **2äºº** |

**é¢„ä¼°æ—¶é—´**ï¼š4-5å‘¨ï¼ˆ2äººå›¢é˜Ÿï¼‰

---

## âœ… éªŒæ”¶æ ‡å‡†

### Phase 1 éªŒæ”¶
- [ ] æ‰€æœ‰Agentå•å…ƒæµ‹è¯•é€šè¿‡
- [ ] å·¥ä½œæµé›†æˆæµ‹è¯•é€šè¿‡
- [ ] èƒ½å¤„ç†è‡³å°‘10é“é¢˜ç›®çš„æ‰¹æ”¹
- [ ] æ‰¹æ”¹ç»“æœå‡†ç¡®åº¦ > 80%

### Phase 2 éªŒæ”¶
- [ ] æ•°æ®åº“è¡¨åˆ›å»ºæˆåŠŸ
- [ ] æ•°æ®å­˜å‚¨å’ŒæŸ¥è¯¢åŠŸèƒ½æ­£å¸¸
- [ ] æ•°æ®ä¸€è‡´æ€§æ£€æŸ¥é€šè¿‡

### Phase 3 éªŒæ”¶
- [ ] UIåŠŸèƒ½å®Œæ•´
- [ ] ç”¨æˆ·äº¤äº’æµç•…
- [ ] è¿›åº¦æ˜¾ç¤ºå‡†ç¡®
- [ ] ç»“æœå±•ç¤ºæ¸…æ™°

### Phase 4 éªŒæ”¶
- [ ] æ€§èƒ½æŒ‡æ ‡è¾¾åˆ°ç›®æ ‡
- [ ] é”™è¯¯å¤„ç†å®Œå–„
- [ ] éƒ¨ç½²æˆåŠŸ
- [ ] æ–‡æ¡£å®Œæ•´

---

## ğŸš€ å¿«é€Ÿå¯åŠ¨æŒ‡å—

### å¼€å‘ç¯å¢ƒè®¾ç½®
```bash
# 1. å…‹éš†ä»“åº“
git clone https://github.com/ZkwareDAO/aiguru.git
cd aiguru

# 2. åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python -m venv .venv
source .venv/bin/activate  # Windows: .venv\Scripts\activate

# 3. å®‰è£…ä¾èµ–
pip install -r requirements.txt
pip install langgraph langchain

# 4. é…ç½®ç¯å¢ƒå˜é‡
cp .env.example .env
# ç¼–è¾‘ .envï¼Œå¡«å…¥ API å¯†é’¥ç­‰

# 5. åˆå§‹åŒ–æ•°æ®åº“
python scripts/init_db.py

# 6. å¯åŠ¨å¼€å‘æœåŠ¡å™¨
streamlit run ai_correction/streamlit_simple.py
```

### æµ‹è¯•
```bash
# è¿è¡Œå•å…ƒæµ‹è¯•
pytest tests/

# è¿è¡Œé›†æˆæµ‹è¯•
pytest tests/integration/

# æ€§èƒ½æµ‹è¯•
python tests/performance/benchmark.py
```

---

## ğŸ“ è”ç³»å’Œæ”¯æŒ

- **æŠ€æœ¯è´Ÿè´£äºº**ï¼š[å¾…å®š]
- **é¡¹ç›®ç»ç†**ï¼š[å¾…å®š]
- **æ–‡æ¡£**ï¼š[å¾…å®š]
- **é—®é¢˜åé¦ˆ**ï¼š[å¾…å®š]

